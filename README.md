# StressStats

Gather system statistics generated by Sar for the duration of a local command.

## Installation

Add this line to your application's Gemfile:

```ruby
gem 'stress_stats'
```

And then execute:

    $ bundle

Or install it yourself as:

    $ gem install stress_stats

## Usage

```sh

$ bundle exec stressstats \
    --remote-host <remote-ssh-host> \
    --local-cmd '<command>' \
    --setup "do_some_task_before.sh" \
    --setup 'do_a_second_task_before.sh'

```



Where:

- `--remote-host` is the "stressed" host. Other SSH attributes can be specified in your `~/.ssh/config`.
- `--local-cmd` is the command to be run on the host local to StressStats. Statistics will be gathered on the remote host for the duration of this command.
- `--setup` can be specified multiple times and will execute commands on the remote host prior to running the command specified to `--local-cmd`, in the order they are given. Services started here need to be forking.
- By default, the script uses a Sar interval of 2 seconds and sar option string '-A', but that can be specified with `--sar-interval` and `--sar-options` respectivelly.

## Development

After checking out the repo, run `bin/setup` to install dependencies. Then, run `rake spec` to run the tests. You can also run `bin/console` for an interactive prompt that will allow you to experiment.

To install this gem onto your local machine, run `bundle exec rake install`. To release a new version, update the version number in `version.rb`, and then run `bundle exec rake release`, which will create a git tag for the version, push git commits and tags, and push the `.gem` file to [rubygems.org](https://rubygems.org).

## Contributing

Bug reports and pull requests are welcome on GitHub at https://github.com/blotta/stress_stats.

## License

The gem is available as open source under the terms of the [MIT License](https://opensource.org/licenses/MIT).
